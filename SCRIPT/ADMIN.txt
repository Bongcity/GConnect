관리자(Admin) 사이트 최종 정리하면서
요청한 것들 전부 포함해서 다시 한 번 “완전체 설계서”로 묶어줄게.

* 기존 Admin 기능들
* * 내가 제안했던 5가지(대리 로그인, Bulk, 알림, 스테이징 구분, 보안 UX)
* * 핵심 시스템 2개

  1. **네이버 상점 이름으로 크롤링**
  2. **상점 API 키로 상품 가져오기**

를 전부 녹여서 정리하겠다.

---

# 1. Admin 사이트 개요

## 1-1. 도메인 & 목적

* 도메인: **`https://admin.gconnect.kr`**
* 목적:

  * GConnect 전체 서비스 운영을 위한 “백오피스”
  * 상점 / 상품 / 요금제 / 크롤링 / 정산 / 문의 / CMS / 정책 관리
  * **네이버 연동(크롤링 + API) 관리의 중심 시스템**

## 1-2. 주요 역할

1. 상점 라이프사이클 관리

   * 가입·승인·요금제·계약·정지 등
2. 상품 데이터 & 노출 정책 관리
3. **네이버 연동 시스템**

   * 상점 이름 입력 → 크롤링 잡 생성 / 실행
   * 상점 API 키 등록 → API 기반 동기화
4. 통계/정산 확인
5. IR 문의/고객 문의 대응
6. 검색 랭킹/가중치 튜닝
7. 운영/보안 관점에서의 설정

---

# 2. 전체 메뉴 구조 & 레이아웃

## 2-1. 레이아웃

* 좌측: **사이드바 메뉴**
* 상단: 상단 바
* 우측 메인: 각 페이지 콘텐츠

### 사이드바 메뉴

1. 대시보드
2. 상점 관리
3. 요금제 관리
4. 상품 관리
5. 검색/노출 정책
6. **네이버 연동 관리 (크롤링 + API 연동)**   ✅ (핵심 시스템 묶음)
7. 크롤링/동기화 상태
8. 청구/정산
9. 문의/티켓 (IR / 고객센터)
10. CMS(콘텐츠 관리)
11. 관리자/권한
12. 시스템 로그

### 상단 바

* 현재 환경 표시: **[PRODUCTION] / [STAGING]** 배지 ✅
* 상점/상품 검색 퀵 서치
* 알림 아이콘 (경고/알림 시스템) ✅
* 로그인 관리자 계정 정보(이름, Role)

> 스테이징/운영 환경 구분은
> **상단 배지 색깔/텍스트**로 강하게 표시해서 “운영에서 장난치지 않게” 만들기.

---

# 3. 페이지별 상세

## 3-1. 대시보드 (`/dashboard`)

### 3-1-1. KPI 카드

* 총 상점 수 / 입점 상점 수
* 총 상품 수 / 입점 상품 수
* 오늘/이번 달 방문자 수
* 오늘/이번 달 “네이버로 이동” 클릭 수
* 이번 달 예상 매출(요금제 기준)

### 3-1-2. 그래프

* 최근 30일 방문/클릭 추이
* 최근 3개월 상점 가입/해지 추이

### 3-1-3. 알림/경고 박스 ✅

* 미처리 IR 문의 N건
* 요금제 만료 임박 상점 N개
* 최근 크롤링 실패 Job N개
* 네이버 API 연동 오류 상점 N개

각 항목 클릭 → 해당 상세 페이지로 이동.

---

## 3-2. 상점 관리 (`/shops`)

### 3-2-1. 상점 리스트

**필터**

* 키워드: 상점명, NaverShopId
* 상태: Pending / Active / Suspended / Expired
* 요금제: Starter / Pro / Enterprise
* 네이버 등급: 파워, 우수, 일반 등
* 네이버 연동 상태:

  * 크롤링 전용 / API 연동 / 둘 다 / 미연동

**리스트 컬럼**

* 상점명
* NaverShopId
* 네이버 등급
* 현재 요금제
* 사용 상품 수 (현재 인덱싱된 상품 수)
* 상태
* 계약 기간
* 네이버 연동 상태 (API 키 유무, 크롤링 성공 여부)
* 최근 로그인(상점 관리자)

**액션**

* 상세 보기
* 상태 변경(승인, 정지, 만료 설정)
* 요금제 변경
* **대리 로그인(상점 뷰로 보기)** 버튼 ✅

---

### 3-2-2. 상점 상세 (`/shops/[id]`)

상단: 주요 요약 정보

* 상점명, NaverShopId, 네이버 URL
* 네이버 등급
* 현재 요금제(플랜명, 월 금액)
* 계약 기간, 상태
* 네이버 연동 상태:

  * **크롤링 설정** / **API 키 등록 여부** / 마지막 동기화 시간

중단: 탭 구조

1. 개요
2. 상품
3. 통계
4. 청구/결제
5. 네이버 연동(핵심) ✅
6. 메모 로그

---

#### (1) 개요 탭

* 최근 30일 노출/클릭/CTR 그래프
* 상점 상품 개수 요약
* 최근 크롤링/동기화 상태
* 미처리 문의(해당 상점 관련) 요약

#### (2) 상품 탭

* 상점 소속 상품 리스트
* 필터: 노출 상태, 카테고리, 품절, 오류 여부
* **Bulk 작업 기능** ✅

  * 체크박스로 여러 상품 선택 후:

    * 일괄 비노출
    * 일괄 카테고리 변경 (추후)
    * 일괄 재크롤링 요청

#### (3) 통계 탭

* 기간 필터(7/30/90일)
* 그래프:

  * 일별 노출/클릭
* TOP 상품, TOP 키워드, TOP 카테고리 테이블

#### (4) 청구/결제 탭

* 월별 청구/결제 상태
* 플랜 변경 이력
* 메모(“3개월 프로모션”, “특가” 등)

#### (5) 네이버 연동 탭 ✅ **(핵심)**

여기가 질문한 1·2번 시스템의 핵심 UI.

##### A. 상점 정보 입력 영역

* 입력 필드:

  * 네이버 상점명
  * 네이버 상점 URL (예: `https://smartstore.naver.com/상점아이디`)
  * NaverShopId (내부 식별값)
* 버튼:

  * “상점 이름/URL로 정보 확인” → NaverShopId 매핑
    (내부적으로 상점명/URL에서 ID 추출/등록)

##### B. **네이버 상품 크롤링 시스템** ✅

* 설명 텍스트:

  * “네이버 상점 이름/URL을 기준으로, 해당 상점의 상품을 크롤링합니다.”
* 입력/버튼:

  * [ 상점명 or 상점 URL ] 입력 필드
  * “상품 크롤링 실행” 버튼
* 동작:

  * 클릭 시 `CrawlJobs`에 Job 생성
  * Job 타입: `FULL` / `INCREMENTAL` 선택 가능 (라디오 버튼이나 드롭다운)
* 상태 표시:

  * 최근 크롤링 Job 목록(5개 정도):

    * Job ID / 타입 / 시작·종료 시간 / 상태(Success/Failed) / 처리 상품 수
  * 실패 시 에러 메시지 확인 링크(로그 페이지로 이동)

> 이게 1번 요구사항:
> **“네이버 상품 크롤링을 할 때 상점 이름을 넣으면 그 상점의 상품을 크롤링할 수 있는 시스템”**
> 을 Admin에서 직접 실행/제어할 수 있게 만든 것.

##### C. **상점 API 키 연동 시스템** ✅

* 설명:

  * “상점에서 발급받은 API 키를 등록하면, 크롤링이 아닌 API를 통해 더 안정적으로 상품을 동기화할 수 있습니다.”
* 입력 필드:

  * API 키
  * (필요 시) API Secret / Client ID 등
* 상태 표시:

  * API 키 등록 여부 (등록/미등록)
  * 마지막 API 연동 시각
  * 마지막 API 호출 결과 (성공/실패, 에러 코드)
* 버튼:

  * “API 연결 테스트” 버튼:

    * 일부 상품만 조회해서 연결 확인
  * “API 기반 상품 동기화 실행” 버튼:

    * 지금 즉시 동기화 Job 생성

> 이게 2번 요구사항:
> **“상점의 API 키를 넣었을 때 해당 상점의 상품 정보를 가져오는 시스템”**
> Admin에서 키를 등록하고, 연결 테스트 & 동기화 상태를 관리할 수 있게 설계.

##### D. 연동 우선순위 로직(개념)

* API 키가 있는 상점:

  * 기본적으로 **API 연동**을 1순위로 사용
  * API 실패 시, 보조적으로 크롤링(선택적)
* API 키가 없는 상점:

  * 크롤링 기반 동기화

> 이 우선순위/정책은 Admin에서 설정 가능하게 만들어도 좋음.
> (예: “API 실패 시 크롤링 ON/OFF” 옵션)

---

#### (6) 메모 로그 탭

* 운영자/영업/CS가 남기는 메모 리스트
* 내용, 작성자, 작성 시간

---

## 3-3. 요금제 관리 (`/plans`)

* 플랜 리스트 (Starter, Pro, Enterprise)
* 필드:

  * 플랜명
  * 최대 상품 수
  * 월 가격
  * 기능 설명
  * 활성 여부
  * (선택) 신청 가능한 네이버 상점 등급 제한

---

## 3-4. 상품 관리 (`/products`)

### 3-4-1. 상품 리스트

**필터**

* 상점
* 입점 여부 (Paid / Free)
* 노출 상태
* 카테고리
* 크롤링/연동 오류 여부

**컬럼**

* 상품 ID
* 썸네일
* 상품명
* 상점명
* 가격
* 카테고리
* 입점 여부
* 노출 상태
* 최근 30일 클릭 수
* 마지막 동기화 시간

**액션**

* 상품 상세
* 비노출 처리
* **Bulk 작업 기능** ✅

  * 여러 상품 선택 후:

    * 일괄 비노출 / 노출
    * 일괄 재크롤링 요청
    * (추후) 일괄 카테고리 재매핑

> Bulk 작업은 잘못 쓰면 위험하므로,
> 보안 UX(5-5)에 따라 **확인 모달**/“변경 대상 N건” 꼭 보여주기.

---

## 3-5. 검색/노출 정책 (`/search-policy`)

* 입점 상점 가중치 (슬라이더)
* 최신성 가중치
* 클릭/CTR 가중치
* 카테고리별 기본 정렬 설정

**정책 미리보기**

* 키워드 입력 → 해당 정책으로 상위 10개 상품 리스트 보여주기
* 나중에는 “A/B 정책 비교”까지 확장 가능

---

## 3-6. 네이버 연동/크롤링 관리 (`/naver-integration`, `/crawling`)

> 6번, 7번 메뉴를 “탭으로 합치는” 것도 가능. 여기선 분리해서 설명.

### 3-6-1. 네이버 연동 관리 (`/naver-integration`)

* 상점별 연동 상태 리스트:

  * 상점명
  * 네이버 상점명/URL
  * 연동 방식: API / 크롤링 / 둘 다 / 미연동
  * 마지막 동기화 방식/시간
  * 최근 에러 여부

* 액션:

  * 각 상점 상세의 “네이버 연동 탭”으로 바로 이동

### 3-6-2. 크롤링/동기화 Job 리스트 (`/crawling`)

* Job 리스트:

  * Job ID
  * 대상 상점 / 전체
  * 타입(FULL/INCREMENTAL/API 동기화)
  * 시작/종료 시간
  * 상태(Pending/Running/Success/Failed)
  * 처리 상품 수
* 필터:

  * 상태별
  * 상점별
  * 기간별
* 상세:

  * 로그 텍스트(최근 N줄)
  * 에러 코드/메시지
  * “재실행” 버튼

> 이 화면과 **대시보드의 경고/알림 시스템**이 연동되어
> 실패 Job이 생기면 알림 목록에 뜨게 하는 구조.

---

## 3-7. 청구/정산 (`/billing`)

(이전 답변 요약 기반 — 그대로 유지)

* 월별 상점별 청구 리스트
* 청구 금액 / 결제 상태 / 조정 금액 / 메모
* 수동 결제 확인 / 상태 변경

---

## 3-8. 문의/티켓 (`/inquiries`)

* IR 문의 (ir.gconnect.kr 문의 위젯)
* 고객센터 문의 (상품 사이트 `/support` 등)

공통:

* 문의 유형
* 상점명(있다면)
* 이메일/연락처
* 내용
* 처리 상태(미처리/진행/완료)
* 담당자 & 처리 로그

---

## 3-9. CMS (`/cms`)

* IR/상품 사이트의 일부 텍스트/FAQ/배너 문구 수정

---

## 3-10. 관리자/권한 (`/users`)

* 관리자 계정 리스트
* Role: SUPER / OPS / CS
* 계정 상태
* 마지막 로그인

> 대리 로그인, 요금제 변경 등 **민감 기능은 SUPER만 허용** 등 권한 체계 설정.

---

## 3-11. 시스템 로그 (`/logs`) – 보안/감사 로그 ✅

* 누가 언제 무엇을 바꿨는지 기록
* 예:

  * `2025-11-23 10:32 / admin@... / PLAN_CHANGE / ShopId=123 / Pro→Enterprise`
  * `2025-11-23 11:15 / ops1@... / PRODUCT_BULK_HIDE / Products=100개`

필터:

* 액션 타입(PLAN_CHANGE, SHOP_STATUS_CHANGE, BULK_OPERATION, CMS_EDIT 등)
* 관리자 계정
* 기간

---

# 4. 추가 제안 기능들 정리 (5-1 ~ 5-5 반영)

## 4-1. 5-1. 대리 로그인(상점 뷰로 보기)

* 위치: 상점 리스트 / 상점 상세 상단 버튼
* 동작:

  * 버튼 클릭 → `seller.gconnect.kr`을 **그 상점 권한으로 띄운 것처럼** 보기
  * 운영자는 상점 관리자 화면 UI를 그대로 확인
* 안전장치:

  * SUPER 권한만 사용 가능 or 로그에 강하게 기록
  * 화면 상단에 “대리 로그인 중” 라벨 표시

---

## 4-2. 5-2. Bulk 작업 기능

* 적용 위치:

  * Admin 상품 리스트
  * 상점 상세의 상품 탭
* 기능 예:

  * 선택 상품 일괄 비노출/노출
  * 일괄 재크롤링 요청
  * (향후) 일괄 요금제 변경, 일괄 태그 부여 등

**보안 UX와 같이 사용:**

* Bulk 작업 실행 시:

  * “총 N개의 상품에 대해 ○○ 작업을 수행합니다. 계속하시겠습니까?” 모달
  * 상점명이 보이게 해서 대상 식별 정확하게

---

## 4-3. 5-3. 경고/알림 시스템

* 상단 바 종(🔔) 아이콘
* 알림 종류:

  * 크롤링 Job 실패
  * API 연동 오류(연속 실패)
  * IR 문의 미처리 일정 시간 경과
  * 계약 만료 예정 상점
* 알림 클릭:

  * 관련 상세 페이지로 이동(해당 상점, 해당 Job, 해당 문의 등)
* 알림 목록은 `Alerts` 테이블에 저장해 나중에 조회 가능

---

## 4-4. 5-4. 스테이징/운영 환경 구분

* UI:

  * 상단 바에 `[STAGING]` / `[PRODUCTION]` 라벨
  * 색상: STAGING(주황/노랑), PRODUCTION(빨강/강조) 등
* URL:

  * `admin-stg.gconnect.kr` / `admin.gconnect.kr`
* 기능 제한:

  * STAGING에서는 청구/결제 관련 기능 비활성화 또는 Dummy 처리

---

## 4-5. 5-5. “보안/안전장치” UX

위험도가 높은 작업(요금제 변경, 상점 정지, 상품 대량 비노출 등)은:

1. **확인 모달** 필수

   * “이 상점(Pro → Enterprise) 요금제를 변경하시겠습니까?”
2. 추가로, 상점명 입력 요구 (ex. “상점명을 입력해 주세요: ___”)
3. SUPER만 가능한 작업 구분:

   * 요금제 변경
   * 상점 정지/삭제
   * 시스템 정책 변경
4. 모든 위험 작업은 시스템 로그(`/logs`)에 기록

---

# 5. 네이버 연동 두 시스템이 Admin 구조에서 가지는 의미

정리하면, 핵심 두 시스템은 이렇게 자리 잡음:

1. **네이버 상품 크롤링 (상점 이름/URL 기반)**
   → Admin의 **상점 상세 > 네이버 연동 탭** 및
   **연동/크롤링 관리 페이지**에서 “잡 생성/상태 모니터링” 담당

2. **상점 API 키 연동 (API 기반 상품 동기화)**
   → Admin에서 API 키를 안전하게 저장/관리하고,
   API 테스트/동기화 실행 & 상태 확인을 담당
   (실제 상점 측에서는 Seller 사이트에서 키를 입력하게 하고,
   그 값이 Admin에서 보이는 형태도 가능)

이 두 가지가 **GConnect의 상품 데이터 인입의 핵심 파이프라인**이고,
Admin이 이걸 “제어판 역할”로 가지게 되는 구조야.

---

